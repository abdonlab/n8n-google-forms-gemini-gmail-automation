
RESUMEN COMPLETO DEL WORKFLOW n8n ‚Äì UMSNH
=======================================

FLUJO GENERAL
-------------
Google Form ‚Üí Google Sheets ‚Üí n8n ‚Üí Google Gemini (IA) ‚Üí Gmail (Respuesta autom√°tica)

---------------------------------------
NODO 1: GOOGLE SHEETS TRIGGER
---------------------------------------

Nombre del nodo:
Google Sheets Trigger

Credencial:
Google Sheets Trigger account (OAuth2)

Par√°metros:
- Poll Times:
  - Mode: Every Minute

- Document:
  - From list
  - Nombre: "Comentarios del cliente (respuestas)"

- Sheet:
  - From list
  - Nombre: "Respuestas de formulario 1"

- Trigger On:
  - Row Added

Campos le√≠dos del Sheet:
- Marca temporal
- Tipo de comentarios
- Comentarios
- Sugerencias de mejora
- Nombre
- Correo electr√≥nico

Funci√≥n:
Detecta cada nueva fila agregada desde el formulario y env√≠a los datos al flujo.

---------------------------------------
NODO 2: GOOGLE GEMINI (IA)
---------------------------------------

Nombre del nodo:
Google Gemini

Credencial:
Google Gemini (PaLM) API account

Host:
https://generativelanguage.googleapis.com

API Key:
(API Key generada en Google AI Studio ‚Äì NO es la misma que OAuth de Google Sheets o Gmail)

Configuraci√≥n:
- Resource: Text
- Operation: Message a Model
- Model: gemini-pro (o el disponible en lista)

Messages:
- Role: User

PROMPT UTILIZADO:
-----------------
Eres un asistente de soporte t√©cnico institucional de la Universidad Michoacana de San Nicol√°s de Hidalgo (UMSNH).

Redacta una respuesta clara, respetuosa y profesional al siguiente comentario enviado por un usuario.

Nombre del usuario: {{ $node["Google Sheets Trigger"].json["Nombre"] }}
Correo electr√≥nico: {{ $node["Google Sheets Trigger"].json["Correo electr√≥nico"] }}
Tipo de comentario: {{ $node["Google Sheets Trigger"].json["Tipo de comentarios"] }}
Comentario del usuario:
{{ $node["Google Sheets Trigger"].json["Comentarios"] }}

La respuesta debe:
- Agradecer el reporte
- Explicar posibles causas
- Proponer pasos de soluci√≥n
- Solicitar informaci√≥n adicional si es necesario
- Cerrar con tono institucional y amable

Simplify Output:
ON

Salida utilizada:
$json.content.parts[0].text

---------------------------------------
NODO 3: GMAIL ‚Äì SEND A MESSAGE
---------------------------------------

Nombre del nodo:
Send a message

Credencial:
Gmail account 2 (OAuth2)

Configuraci√≥n:
- Resource: Message
- Operation: Send

To:
{{ $node["Google Sheets Trigger"].json["Correo electr√≥nico"] }}

Subject:
Respuesta a tu comentario / queja ‚Äì UMSNH

Email Type:
HTML

MENSAJE COMPLETO (HTML):
------------------------

<h2>Respuesta a tu comentario / queja ‚Äì UMSNH</h2>

<p>Estimado/a <b>{{ $node["Google Sheets Trigger"].json["Nombre"] }}</b>,</p>

<hr>

<h3>üì© Comentario recibido</h3>

<p><b>Nombre:</b> {{ $node["Google Sheets Trigger"].json["Nombre"] }}</p>
<p><b>Correo electr√≥nico:</b> {{ $node["Google Sheets Trigger"].json["Correo electr√≥nico"] }}</p>
<p><b>Tipo:</b> {{ $node["Google Sheets Trigger"].json["Tipo de comentarios"] }}</p>
<p><b>Fecha y hora:</b> {{ $node["Google Sheets Trigger"].json["Marca temporal"] }}</p>

<p><b>Mensaje del usuario:</b></p>
<blockquote style="background:#f5f5f5; padding:10px; border-left:4px solid #999;">
{{ $node["Google Sheets Trigger"].json["Comentarios"] }}
</blockquote>

<hr>

<h3>üõ†Ô∏è Respuesta de Soporte UMSNH</h3>

<p>
{{ $json.content.parts[0].text }}
</p>

<hr>

<p style="font-size:12px;color:#666;">
Este mensaje fue generado autom√°ticamente por el sistema de atenci√≥n de la Universidad Michoacana de San Nicol√°s de Hidalgo (UMSNH).
</p>

---------------------------------------
ESTADO FINAL
---------------------------------------

‚úî Flujo funcional
‚úî IA generando respuestas autom√°ticas
‚úî Correo enviado correctamente al usuario
‚úî Datos trazables (nombre, correo, comentario, fecha)

Documento generado para:
- Documentaci√≥n t√©cnica
- Auditor√≠a
- Replicaci√≥n del sistema
- Escalamiento institucional

